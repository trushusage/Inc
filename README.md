{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {
      "id": "xauVajNZXUzzZ-iBRAReU",
      "type": "rectangle",
      "x": 682.6666870117188,
      "y": 324,
      "width": 514.6666870117188,
      "height": 72,
      "angle": 0,
      "strokeColor": "#f08c00",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "a0",
      "roundness": {
        "type": 3
      },
      "seed": 2108543300,
      "version": 60,
      "versionNonce": 1242909764,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "etCshCTDI2wBjjffxwQFL"
        },
        {
          "id": "ncXsYaO-8n5vFzmpS2ywd",
          "type": "arrow"
        }
      ],
      "updated": 1731398760122,
      "link": null,
      "locked": false
    },
    {
      "id": "etCshCTDI2wBjjffxwQFL",
      "type": "text",
      "x": 862.5700836181641,
      "y": 347.5,
      "width": 154.85989379882812,
      "height": 25,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "a1",
      "roundness": null,
      "seed": 17924932,
      "version": 26,
      "versionNonce": 409543108,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731398764931,
      "link": null,
      "locked": false,
      "text": "Category Queue",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "xauVajNZXUzzZ-iBRAReU",
      "originalText": "Category Queue",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "NRCt2Ix4qc-oMKOMeSDHT",
      "type": "rectangle",
      "x": 654.9636222830568,
      "y": -319.3184600509478,
      "width": 514.6666870117188,
      "height": 72,
      "angle": 0,
      "strokeColor": "#f08c00",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "a2",
      "roundness": {
        "type": 3
      },
      "seed": 1218773628,
      "version": 379,
      "versionNonce": 751245550,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "VMk6jxPt18wfkOqXU9P0r"
        },
        {
          "id": "SqzvWFe97n0zxPu6_gsJZ",
          "type": "arrow"
        }
      ],
      "updated": 1731400128111,
      "link": null,
      "locked": false
    },
    {
      "id": "VMk6jxPt18wfkOqXU9P0r",
      "type": "text",
      "x": 821.0570289603029,
      "y": -295.8184600509478,
      "width": 182.47987365722656,
      "height": 25,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "a3",
      "roundness": null,
      "seed": 1985434364,
      "version": 359,
      "versionNonce": 1385286446,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731400128111,
      "link": null,
      "locked": false,
      "text": "Notification Queue",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "NRCt2Ix4qc-oMKOMeSDHT",
      "originalText": "Notification Queue",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "dx_kGx26SNI-CmxSd7EpS",
      "type": "rectangle",
      "x": 2405.2569351689194,
      "y": 348.88285703520637,
      "width": 153.3333740234375,
      "height": 296,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "a6",
      "roundness": {
        "type": 3
      },
      "seed": 172396740,
      "version": 269,
      "versionNonce": 1646121198,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "-K6ji8aJmmsGPXN0li_3f"
        },
        {
          "id": "NkhAhWfaVmQ8nk4gU7K5N",
          "type": "arrow"
        },
        {
          "id": "XsnxGPfHhurVOnqva64rx",
          "type": "arrow"
        },
        {
          "id": "sSQAtzWGkk9CDOMPBVtp-",
          "type": "arrow"
        },
        {
          "id": "QXhgTZcRo4nzOTT2E-kcm",
          "type": "arrow"
        },
        {
          "id": "j86HEqikYsx_H8BceonR_",
          "type": "arrow"
        }
      ],
      "updated": 1731399395480,
      "link": null,
      "locked": false
    },
    {
      "id": "-K6ji8aJmmsGPXN0li_3f",
      "type": "text",
      "x": 2440.2936554447983,
      "y": 459.38285703520637,
      "width": 83.25993347167969,
      "height": 75,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "a7",
      "roundness": null,
      "seed": 681006204,
      "version": 235,
      "versionNonce": 1806726084,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731398615989,
      "link": null,
      "locked": false,
      "text": "Incoming\nSwift\nTables",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "dx_kGx26SNI-CmxSd7EpS",
      "originalText": "Incoming\nSwift\nTables",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "ZqEyeMYlvG8EhwjAnVgMD",
      "type": "diamond",
      "x": 2629.8305276972383,
      "y": -136.6523930595959,
      "width": 293.3333740234375,
      "height": 290.6666717529297,
      "angle": 0,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "a8",
      "roundness": {
        "type": 2
      },
      "seed": 876975100,
      "version": 739,
      "versionNonce": 1008342510,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "E_CXhu4CuDpkJe17Av3J-"
        },
        {
          "id": "NkhAhWfaVmQ8nk4gU7K5N",
          "type": "arrow"
        },
        {
          "id": "XsnxGPfHhurVOnqva64rx",
          "type": "arrow"
        }
      ],
      "updated": 1731401419788,
      "link": null,
      "locked": false
    },
    {
      "id": "E_CXhu4CuDpkJe17Av3J-",
      "type": "text",
      "x": 2723.3339075190156,
      "y": -16.485725121363487,
      "width": 106.65992736816406,
      "height": 50,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "a9",
      "roundness": null,
      "seed": 1244993788,
      "version": 683,
      "versionNonce": 1484597294,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731401419788,
      "link": null,
      "locked": false,
      "text": "Claim Rules\nBatch",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "ZqEyeMYlvG8EhwjAnVgMD",
      "originalText": "Claim Rules Batch",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "ffTqut0yTXhVa8-2Ll0QH",
      "type": "ellipse",
      "x": 1574.1909794921098,
      "y": 244.14505568062185,
      "width": 253.3333740234375,
      "height": 228,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffec99",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aA",
      "roundness": {
        "type": 2
      },
      "seed": 656193660,
      "version": 144,
      "versionNonce": 818012978,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "2Q0MCufxYkDNF1XUzZ5kV"
        },
        {
          "id": "ncXsYaO-8n5vFzmpS2ywd",
          "type": "arrow"
        },
        {
          "id": "S2Bb8K7cvMArF_0JivChN",
          "type": "arrow"
        }
      ],
      "updated": 1731401553912,
      "link": null,
      "locked": false
    },
    {
      "id": "2Q0MCufxYkDNF1XUzZ5kV",
      "type": "text",
      "x": 1649.3008334506114,
      "y": 333.0348826253554,
      "width": 102.97991943359375,
      "height": 50,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aB",
      "roundness": null,
      "seed": 33118460,
      "version": 100,
      "versionNonce": 681217074,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731401545727,
      "link": null,
      "locked": false,
      "text": "Pacs Camt\nListeners",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "ffTqut0yTXhVa8-2Ll0QH",
      "originalText": "Pacs Camt Listeners",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "ncXsYaO-8n5vFzmpS2ywd",
      "type": "arrow",
      "x": 1202.0289807820761,
      "y": 359.0570572600394,
      "width": 375.18723114758654,
      "height": 5.104568706420196,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aF",
      "roundness": {
        "type": 2
      },
      "seed": 2059067644,
      "version": 58,
      "versionNonce": 2130615420,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731398850207,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          375.18723114758654,
          -5.104568706420196
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "xauVajNZXUzzZ-iBRAReU",
        "focus": 0.06637946858864138,
        "gap": 4.6956067586386325,
        "fixedPoint": null
      },
      "endBinding": {
        "elementId": "ffTqut0yTXhVa8-2Ll0QH",
        "focus": 0.05152707207103605,
        "gap": 1,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "S2Bb8K7cvMArF_0JivChN",
      "type": "arrow",
      "x": 1828.1797817311726,
      "y": 375.7610636717643,
      "width": 583.3602764209786,
      "height": 3.1088909285544446,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aG",
      "roundness": {
        "type": 2
      },
      "seed": 469065852,
      "version": 419,
      "versionNonce": 469174702,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731401493385,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          583.3602764209786,
          -3.1088909285544446
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "ffTqut0yTXhVa8-2Ll0QH",
        "focus": 0.160475636980905,
        "gap": 2.145377311867179,
        "fixedPoint": null
      },
      "endBinding": null,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "NkhAhWfaVmQ8nk4gU7K5N",
      "type": "arrow",
      "x": 2546.8927458964977,
      "y": 349.5988304016705,
      "width": 185.45524886881958,
      "height": 241.34105440907047,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aH",
      "roundness": {
        "type": 2
      },
      "seed": 979475836,
      "version": 762,
      "versionNonce": 1877043762,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731401433491,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          185.45524886881958,
          -241.34105440907047
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "dx_kGx26SNI-CmxSd7EpS",
        "focus": -0.2532062978332028,
        "gap": 1,
        "fixedPoint": null
      },
      "endBinding": {
        "elementId": "ZqEyeMYlvG8EhwjAnVgMD",
        "focus": -0.22069934922718618,
        "gap": 1,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "XsnxGPfHhurVOnqva64rx",
      "type": "arrow",
      "x": 2730.8176175730287,
      "y": 110.15775601975253,
      "width": 185.8298059160902,
      "height": 237.8008551571976,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aI",
      "roundness": {
        "type": 2
      },
      "seed": 139125244,
      "version": 679,
      "versionNonce": 1214603822,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731401430857,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          -185.8298059160902,
          237.8008551571976
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "ZqEyeMYlvG8EhwjAnVgMD",
        "focus": -0.22922450248317705,
        "gap": 1,
        "fixedPoint": null
      },
      "endBinding": {
        "elementId": "dx_kGx26SNI-CmxSd7EpS",
        "focus": -0.277207021357531,
        "gap": 1,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "ZgFWX2yOj1QtQYL_P5uvM",
      "type": "rectangle",
      "x": 3109.745938817743,
      "y": 834.1727264118282,
      "width": 281.4124205034004,
      "height": 203.02815860068517,
      "angle": 0,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aL",
      "roundness": {
        "type": 3
      },
      "seed": 247609668,
      "version": 184,
      "versionNonce": 623869234,
      "isDeleted": false,
      "boundElements": [
        {
          "id": "QXhgTZcRo4nzOTT2E-kcm",
          "type": "arrow"
        },
        {
          "id": "501u_KhkicOgLaqcphsud",
          "type": "arrow"
        },
        {
          "id": "sSQAtzWGkk9CDOMPBVtp-",
          "type": "arrow"
        }
      ],
      "updated": 1731401407404,
      "link": null,
      "locked": false
    },
    {
      "id": "HSeATvF6NRBL0ZE6oQHLW",
      "type": "text",
      "x": 3145.568728439316,
      "y": 923.4876990864008,
      "width": 203.09983825683594,
      "height": 25,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aM",
      "roundness": null,
      "seed": 93098620,
      "version": 144,
      "versionNonce": 940134450,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731401353151,
      "link": null,
      "locked": false,
      "text": "Message Claim Batch",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "Message Claim Batch",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "QXhgTZcRo4nzOTT2E-kcm",
      "type": "arrow",
      "x": 2559.916128464148,
      "y": 551.3920905183941,
      "width": 548.8298103535949,
      "height": 354.0327195092457,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aN",
      "roundness": {
        "type": 2
      },
      "seed": 1909398780,
      "version": 305,
      "versionNonce": 611124594,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731401494970,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          548.8298103535949,
          354.0327195092457
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": null,
      "endBinding": {
        "elementId": "ZgFWX2yOj1QtQYL_P5uvM",
        "focus": -0.3180177117377251,
        "gap": 1,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "iGIRKPwMwGeEDsMMmldda",
      "type": "rectangle",
      "x": 2403.353486209302,
      "y": 803.5117257125964,
      "width": 153.3333740234375,
      "height": 296,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aO",
      "roundness": {
        "type": 3
      },
      "seed": 179431932,
      "version": 477,
      "versionNonce": 1110799474,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "81gYo3OXYaeSKcQJtmcAN"
        },
        {
          "id": "TTngM2lUX9NEgyxpCuKod",
          "type": "arrow"
        }
      ],
      "updated": 1731401872234,
      "link": null,
      "locked": false
    },
    {
      "id": "81gYo3OXYaeSKcQJtmcAN",
      "type": "text",
      "x": 2413.45019641438,
      "y": 939.0117257125964,
      "width": 133.13995361328125,
      "height": 25,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aP",
      "roundness": null,
      "seed": 1163610748,
      "version": 416,
      "versionNonce": 473044530,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731401872234,
      "link": null,
      "locked": false,
      "text": "Outbox Table",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "iGIRKPwMwGeEDsMMmldda",
      "originalText": "Outbox Table",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "501u_KhkicOgLaqcphsud",
      "type": "arrow",
      "x": 3108.745938817743,
      "y": 916.9390880119287,
      "width": 552.6988953556879,
      "height": 23.05719447414765,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aS",
      "roundness": {
        "type": 2
      },
      "seed": 559146948,
      "version": 260,
      "versionNonce": 940946606,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731401499557,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          -552.6988953556879,
          -23.05719447414765
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "ZgFWX2yOj1QtQYL_P5uvM",
        "focus": 0.11953453229978452,
        "gap": 1,
        "fixedPoint": null
      },
      "endBinding": null,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "sSQAtzWGkk9CDOMPBVtp-",
      "type": "arrow",
      "x": 3106.6529975310796,
      "y": 904.2632795349562,
      "width": 550.517865789664,
      "height": 355.150368189574,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aT",
      "roundness": {
        "type": 2
      },
      "seed": 308812996,
      "version": 379,
      "versionNonce": 1760381874,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731401494970,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          -550.517865789664,
          -355.150368189574
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "ZgFWX2yOj1QtQYL_P5uvM",
        "focus": -0.319025219759349,
        "gap": 3.0929412866635175,
        "fixedPoint": null
      },
      "endBinding": null,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "Hr1PXl_ureE9N-TBYFwze",
      "type": "rectangle",
      "x": 1572.6040311598863,
      "y": 841.5474484787528,
      "width": 281.4124205034004,
      "height": 203.02815860068517,
      "angle": 0,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aV",
      "roundness": {
        "type": 3
      },
      "seed": 1480695804,
      "version": 405,
      "versionNonce": 965387442,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "G-8AxHD9HdpshJDJg3ken"
        },
        {
          "id": "TTngM2lUX9NEgyxpCuKod",
          "type": "arrow"
        },
        {
          "id": "2bI1ywZ5lIeZgkyKNLNTX",
          "type": "arrow"
        }
      ],
      "updated": 1731399013191,
      "link": null,
      "locked": false
    },
    {
      "id": "G-8AxHD9HdpshJDJg3ken",
      "type": "text",
      "x": 1601.390311907192,
      "y": 930.5615277790955,
      "width": 223.83985900878906,
      "height": 25,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aVV",
      "roundness": null,
      "seed": 510301508,
      "version": 98,
      "versionNonce": 167198322,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731399013191,
      "link": null,
      "locked": false,
      "text": "Outbox Process Batch",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "Hr1PXl_ureE9N-TBYFwze",
      "originalText": "Outbox Process Batch",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "TTngM2lUX9NEgyxpCuKod",
      "type": "arrow",
      "x": 2398.525526637693,
      "y": 955.1304736058569,
      "width": 543.5090749744063,
      "height": 8.576154302689588,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aY",
      "roundness": {
        "type": 2
      },
      "seed": 803723516,
      "version": 194,
      "versionNonce": 1505001458,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731401872234,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          -543.5090749744063,
          8.576154302689588
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "iGIRKPwMwGeEDsMMmldda",
        "focus": -0.01563453673693949,
        "gap": 4.827959571608972,
        "fixedPoint": null
      },
      "endBinding": {
        "elementId": "Hr1PXl_ureE9N-TBYFwze",
        "focus": 0.2204266019299923,
        "gap": 1,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "uaIUzcRXl70Yg5DBGIgup",
      "type": "rectangle",
      "x": 676.9600031752252,
      "y": 893.603383270907,
      "width": 514.6666870117188,
      "height": 72,
      "angle": 0,
      "strokeColor": "#f08c00",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aZ",
      "roundness": {
        "type": 3
      },
      "seed": 2014002756,
      "version": 375,
      "versionNonce": 1008241906,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "BboKbwHt6p82V-TjwER5e"
        },
        {
          "id": "2bI1ywZ5lIeZgkyKNLNTX",
          "type": "arrow"
        }
      ],
      "updated": 1731399015924,
      "link": null,
      "locked": false
    },
    {
      "id": "BboKbwHt6p82V-TjwER5e",
      "type": "text",
      "x": 888.5333750624322,
      "y": 917.103383270907,
      "width": 91.51994323730469,
      "height": 25,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aa",
      "roundness": null,
      "seed": 1947391428,
      "version": 363,
      "versionNonce": 186523314,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731399015924,
      "link": null,
      "locked": false,
      "text": "Exchange",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "uaIUzcRXl70Yg5DBGIgup",
      "originalText": "Exchange",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "2bI1ywZ5lIeZgkyKNLNTX",
      "type": "arrow",
      "x": 1565.841585472372,
      "y": 938.1452113933957,
      "width": 365.85791351493367,
      "height": 0.9080290494672454,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "ab",
      "roundness": {
        "type": 2
      },
      "seed": 234645828,
      "version": 294,
      "versionNonce": 252409970,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731399015924,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          -365.85791351493367,
          0.9080290494672454
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "Hr1PXl_ureE9N-TBYFwze",
        "focus": 0.016317748059613547,
        "gap": 6.762445687514401,
        "fixedPoint": null
      },
      "endBinding": {
        "elementId": "uaIUzcRXl70Yg5DBGIgup",
        "focus": 0.2759181975598588,
        "gap": 8.356981770494258,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "LH39g-uYE5fF3FbA_6s34",
      "type": "ellipse",
      "x": 1585.8162336565506,
      "y": -398.94996561572975,
      "width": 253.3333740234375,
      "height": 228,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffec99",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "ac",
      "roundness": {
        "type": 2
      },
      "seed": 643084868,
      "version": 434,
      "versionNonce": 1488934830,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "q8eX2vB35tTkHYJw9W0wa"
        },
        {
          "id": "SqzvWFe97n0zxPu6_gsJZ",
          "type": "arrow"
        },
        {
          "id": "j86HEqikYsx_H8BceonR_",
          "type": "arrow"
        }
      ],
      "updated": 1731400128111,
      "link": null,
      "locked": false
    },
    {
      "id": "q8eX2vB35tTkHYJw9W0wa",
      "type": "text",
      "x": 1654.6860897512827,
      "y": -310.06013867099614,
      "width": 115.45991516113281,
      "height": 50,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "ad",
      "roundness": null,
      "seed": 17680836,
      "version": 420,
      "versionNonce": 982790638,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731400128111,
      "link": null,
      "locked": false,
      "text": "Notification\nListeners",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "LH39g-uYE5fF3FbA_6s34",
      "originalText": "Notification\nListeners",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "SqzvWFe97n0zxPu6_gsJZ",
      "type": "arrow",
      "x": 1178.8449138725964,
      "y": -275.14964177777597,
      "width": 412.882064828362,
      "height": 1.3021131065936515,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "ae",
      "roundness": {
        "type": 2
      },
      "seed": 1179431108,
      "version": 787,
      "versionNonce": 1473180850,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731400128576,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          412.882064828362,
          -1.3021131065936515
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "NRCt2Ix4qc-oMKOMeSDHT",
        "focus": 0.24474474528079446,
        "gap": 9.214604577820865,
        "fixedPoint": null
      },
      "endBinding": {
        "elementId": "LH39g-uYE5fF3FbA_6s34",
        "focus": -0.0712046565954753,
        "gap": 1,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "j86HEqikYsx_H8BceonR_",
      "type": "arrow",
      "x": 1840.526909755067,
      "y": -263.6753176033859,
      "width": 558.7015950740281,
      "height": 622.4299814295726,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "af",
      "roundness": {
        "type": 2
      },
      "seed": 231298556,
      "version": 480,
      "versionNonce": 1457983086,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731400128111,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          558.7015950740281,
          622.4299814295726
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "LH39g-uYE5fF3FbA_6s34",
        "focus": -0.669064527776666,
        "gap": 3.5281365295015803,
        "fixedPoint": null
      },
      "endBinding": {
        "elementId": "dx_kGx26SNI-CmxSd7EpS",
        "focus": 0.352071081020772,
        "gap": 6.028430339824354,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "g93_tpJWVuw9V3mGd2dra",
      "type": "text",
      "x": 1243.647167253251,
      "y": 269.17793192776287,
      "width": 415.2542928282349,
      "height": 75.61964960111736,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "ag",
      "roundness": null,
      "seed": 1385501486,
      "version": 542,
      "versionNonce": 1115010610,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1731400264017,
      "link": null,
      "locked": false,
      "text": "2- Yeni Swift Mesajı\nYayınlandı",
      "fontSize": 30.247859840446942,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "2- Yeni Swift Mesajı Yayınlandı",
      "autoResize": false,
      "lineHeight": 1.25
    },
    {
      "id": "4v2jFuqf2tKf2oyq_4Nqm",
      "type": "text",
      "x": 2669.5567179424525,
      "y": 183.3188399078374,
      "width": 415.2542928282349,
      "height": 37.80982480055868,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "aj",
      "roundness": null,
      "seed": 707880622,
      "version": 804,
      "versionNonce": 1791109614,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731401439839,
      "link": null,
      "locked": false,
      "text": "3- Claim Edilmeli mi Kararı",
      "fontSize": 30.247859840446942,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "3- Claim Edilmeli mi Kararı",
      "autoResize": false,
      "lineHeight": 1.25
    },
    {
      "id": "Rxi2_cUOQFWJ48Lehxe5Q",
      "type": "text",
      "x": 2574.458379889902,
      "y": 933.2604664661367,
      "width": 415.2542928282349,
      "height": 75.61964960111736,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "ak",
      "roundness": null,
      "seed": 1413352626,
      "version": 1044,
      "versionNonce": 1926380338,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731400272063,
      "link": null,
      "locked": false,
      "text": "4- Claim RabbitMQ Message\nHazırlanması",
      "fontSize": 30.247859840446942,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "4- Claim RabbitMQ Message Hazırlanması",
      "autoResize": false,
      "lineHeight": 1.25
    },
    {
      "id": "acWlGIOttxgxL1m2okxsL",
      "type": "text",
      "x": 1532.8165429829144,
      "y": 1067.0839590044627,
      "width": 415.2542928282349,
      "height": 75.61964960111736,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "al",
      "roundness": null,
      "seed": 1825002866,
      "version": 1132,
      "versionNonce": 1982468658,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731400274344,
      "link": null,
      "locked": false,
      "text": "5- RabbitMQ Mesajının\nExchange'e Bırakılması",
      "fontSize": 30.247859840446942,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "5- RabbitMQ Mesajının Exchange'e Bırakılması",
      "autoResize": false,
      "lineHeight": 1.25
    },
    {
      "id": "a1eVUrmZ2icOjTq4XjZJU",
      "type": "text",
      "x": 1208.039537490646,
      "y": -337.4451898002227,
      "width": 310.91973876953125,
      "height": 25,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "am",
      "roundness": null,
      "seed": 1385885746,
      "version": 121,
      "versionNonce": 337727342,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1731400257793,
      "link": null,
      "locked": false,
      "text": "6- Claim isteği alındı ve rededildi",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "6- Claim isteği alındı ve rededildi",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "uVj_3nHu9umuoEixfn9Os",
      "type": "text",
      "x": 1191.799845464565,
      "y": -249.5563046246907,
      "width": 384.15966796875,
      "height": 25,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "an",
      "roundness": null,
      "seed": 2146463346,
      "version": 238,
      "versionNonce": 318594990,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731400326804,
      "link": null,
      "locked": false,
      "text": "7- Mesaj ataması (sahipliği) gerçekleşti ",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "7- Mesaj ataması (sahipliği) gerçekleşti ",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "z2csmMxEqukOJGVO1kXxd",
      "type": "text",
      "x": 1204.29601642124,
      "y": -204.51010944662204,
      "width": 355.4797058105469,
      "height": 25,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "ao",
      "roundness": null,
      "seed": 1258672878,
      "version": 329,
      "versionNonce": 2041007090,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1731401117203,
      "link": null,
      "locked": false,
      "text": "9- Mesaj Release veya Free edilmesi ",
      "fontSize": 20,
      "fontFamily": 5,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "9- Mesaj Release veya Free edilmesi ",
      "autoResize": true,
      "lineHeight": 1.25
    }
  ],
  "appState": {
    "gridSize": 20,
    "gridStep": 5,
    "gridModeEnabled": false,
    "viewBackgroundColor": "#ffffff"
  },
  "files": {}
}



sequenceDiagram

    # SWIFT_CORE_TRAFFIC_STARTED = Swift Core sistemi mesaj trafigine basladiginda sistem bu tip ile bildirim iletecektir.

    SWCore_Message_Notification_Queue ->> Incoming_Swift_Notification_Listener: SWIFT_CORE_TRAFFIC_STARTED
    Incoming_Swift_Notification_Listener ->> interaction_request_table: insert SWIFT_CORE_TRAFFIC_STARTED



sequenceDiagram

    # interaction_request_table # Columns: id, interaction_id, type, status, source, payload, create_date, update_date
    # incoming_Swift_Messages_Table # (Columns id, index'li unique Message id(swiftcore'dan iletilecek MT=MIR, MX=Business Application Header'in MessageIdentifier yani her swift mesaji icin unique + Yardimci bu kolon primary key yerine unique constranint olsun dedi. Hem SWCore bagimliligi olmuyor hem de null olabiliyor.), inser_date, Queue_Name = Message_Type, status, UETR)

    SWCore_Pacs008_Pacs009_Camt.053_Camt.054_Queues ->> incoming_Swift_Message_Listener: New Message

    # Olasi Sorular, Feedback'ler ve Cozumleri
    ## Yeni Transaction icerisinde yapilmasi lazim -> MY Toplantisi
    ## Ayni Transaction icerisinde yapilmasi lazim -> MK Toplantisi -> Dogrusu bu !
    ## db'de ayni Transaction'da olup 1 table yerine 3'unu de rollback etmeli.
    ## isimlendirme onerisi: unique message id veya swcore_ref

    # Risks
	## !! SwiftCore at least one calistigi icin 2 kere ayni mesaji dinleme riski cozulmeli !!
	## 1 mesaj 3 farkli thread ile ayni milisaniyede islenmeye basladiginda ne olacak?
    ## Solution TODO: Ayni mesaj gonderilirse listener ayni unique msg id'si ile ekleme kontrolu yapacak.

    # Advantages
    ## MX versiyon bagimsiz.
    ## Dinledigimiz mesajlari claim karari oncesi neden kaydetmemiz gerekir.
    ### Mesaj claimde birbirini beklemesi gereken mesajlarin sahiplenebilmesi icin.
    #### MT103 MT202 MT940 mesajlarinin birbirini bekledigi caselerde.
    ### Karari o an vermek istemeyip daha sonra tekrar yurutmek istedigimizde.
    ### Belirli sure claim edilmeyen mesajlara logic yazmak istersek.    -> Body'i daha sonra da kaydedebilriz aslinda.
    ### Mesaj sahiplenme logic'ini gelistirmek icin kesin yararli olur. -> Tabi SWCore'dan da alinabilir.
    ### Bize baska esnekliklerde saglayacaktir.
    ### DONTCLAIM'lerde arsiv, partition, delete, ara tablo vb degerlendirilecek.

    incoming_Swift_Message_Listener ->> incoming_Swift_Messages_Table: Request ayni unique mesaj id'li kayit var mi?
    incoming_Swift_Messages_Table ->> incoming_Swift_Message_Listener: Boolean Response
    alt New Record?
        incoming_Swift_Message_Listener ->> SWCore_Pacs008_Pacs009_Camt.053_Camt.054_Queues: return message_listened_ack = duplicate listen or listened
    else
        incoming_Swift_Message_Listener ->> interaction_request_table: insert
        # incoming_Swift_Messages_Table
        incoming_Swift_Message_Listener ->> incoming_Swift_Messages_Table: insert status LISTENED
        incoming_Swift_Message_Listener ->> Swift_Messages_Sections_Table: insert
        incoming_Swift_Message_Listener ->> incoming_Swift_Messages_Fields_Table: insert
        incoming_Swift_Message_Listener ->> incoming_Swift_Messages_Attributes_Table: insert
        incoming_Swift_Message_Listener ->> SWCore_Pacs008_Pacs009_Camt.053_Camt.054_Queues: return message_listened_ack
    end
	
	# Buranin sonunda commit atiliyor.



sequenceDiagram

	# + table isimlendirme onerisi: incoming_swift_messages

    # incoming_Swift_Messages_Table + swift_message_sections_table + swift_message_fields_table

    Claim_Rules_Batch ->> GetSwiftMessagesUseCase: Request LISTENED status and insert_date > SwiftCore tarafinda sahiplenilmeyen mesajlar icin olan alert time.
    GetSwiftMessagesUseCase ->> Claim_Rules_Batch: Response

    alt Claim Decision
        Claim_Rules_Batch ->> incoming_Swift_Messages_Table: Update status READY_TO_CLAIM
    else
        Claim_Rules_Batch ->> incoming_Swift_Messages_Table: Update status DONT_CLAIM (after certain amounts of time)
    else
        Claim_Rules_Batch ->> incoming_Swift_Messages_Table: No Update (aksiyon alinmiyor ama gorulmesi icin cizildi)
    end 



sequenceDiagram
    participant Batch as Message_Claim_Batch
    participant Incoming as incoming_Swift_Messages_Table
    participant Interaction as interaction_response_table # ID, INTERACTION_ID(UUIDv7), TYPE, STATUS(NEW, ACK, NACKED, PROCESSED), CREATE_DATE, UPDATE_DATE, PAYLOAD, HEADER, ROUTING_KEY
    participant Outbox as Publisher_Outbox_Table # id, status, message_body, exchange_name, create_date, update_date, publish_date

    Batch ->> Incoming: Get All READY_TO_CLAIM Status Records
    Incoming -->> Batch: Response

    Batch ->> Incoming: Update Status CLAIM_SWIFT_MESSAGE, update_date
    Batch ->> Interaction: Insert with Protocol = id(UUIDv7), CLAIM_SWIFT_MESSAGE, message body 
    Batch ->> Outbox: Insert Outbox type CLAIM_SWIFT_MESSAGE, Status PENDING




sequenceDiagram
    participant Relay as Outbox_Process_Batch
    participant Outbox as Publisher_Outbox_Table
    participant SWCore as SWCore_Message_Exchange

    Relay ->> Outbox: Fetch PENDING Messages
    Relay ->> SWCore: Send # CLAIM_SWIFT_MESSAGE
    SWCore -->> Relay: Acknowledgment (ACK/NACK)
    Relay ->> Outbox: Update Status to ACK / NACK
    Relay ->> interaction_request_table: Update Request Status
    Relay ->> interaction_response_table: insert Response
    # SwiftCore exchange idempotent. Gelistirme planinda ama simdilik insert etmiyor seklinde calisiyor.





 sequenceDiagram
# + ClaimedACK, ClaimedNACK vb donus eklenecek.
# + SwiftCore a gonderim istekler, istek body'si ile birlikte, id'leri ayri bir table'da tutulacak. Cevap donulmeyen istekler icin alert olusturulacak.

# Outbox uygulayarak 2 sequencede ciz. -> burada outbox gerekmiyordur heralde?

# interaction_request_table: Insert Swift-Core Response with id, body, CLAIM_SWIFT_MESSAGE_ACK and CLAIM_REQUEST_REJECTED

# CLAIM_REQUEST_REJECTED = Swift Mesaji sahiplenme istegi sonucunda mesaj atamasi gerceklesmezse sistem bu tip ile bildirim iletecektir.
# CLAIM_REQUEST_REJECTED manual sahiplenme disinda neden gelsin? Bunun ogrenilmesi gerekiyor.

    alt Claim Response
        SWCore_Message_Notification_Queue ->> Incoming_Swift_Notification_Listener: CLAIM_SWIFT_MESSAGE_ACK
        Incoming_Swift_Notification_Listener ->> interaction_request_table: Insert CLAIM_SWIFT_MESSAGE_ACK
        Incoming_Swift_Notification_Listener ->> Incoming_Swift_Messages_Table: Update Status CLAIM_SWIFT_MESSAGE_ACK
    else
        SWCore_Message_Notification_Queue ->> Incoming_Swift_Notification_Listener: CLAIM_REQUEST_REJECTED
        Incoming_Swift_Notification_Listener ->> interaction_request_table: Insert CLAIM_REQUEST_REJECTED
        Incoming_Swift_Notification_Listener ->> Incoming_Swift_Messages_Table: Update Status CLAIM_REQUEST_REJECTED
    end





 sequenceDiagram

    SWCore_Message_Notification_Queue ->> Incoming_Swift_Notification_Listener: SWIFT_MESSAGE_ASSIGNED
    Incoming_Swift_Notification_Listener ->> interaction_response_table: Insert SWIFT_MESSAGE_ASSIGNED

    Incoming_Swift_Notification_Listener ->> Incoming_Swift_Messages_Table: Is it a new message?
    Incoming_Swift_Messages_Table ->> Incoming_Swift_Notification_Listener: response
    alt Claimed
        Incoming_Swift_Notification_Listener ->> Incoming_Swift_Messages_Table: Update status SWIFT_MESSAGE_ASSIGNED
    else
        # Birden fazla claim eden nedeniyle alinamayan mesajlar (Manuele duseceginden)
        # Rule setimize girmediginden alinamayan mesajlar
        # Release edilip geri manuel alinanlar
        Incoming_Swift_Notification_Listener ->> incoming_Swift_Messages_Table: insertOrUpdate status SWIFT_MESSAGE_ASSIGNED
        Incoming_Swift_Notification_Listener ->> Swift_Messages_Sections_Table: insertOrUpdate
        Incoming_Swift_Notification_Listener ->> Swift_Messages_Fields_Table: insertOrUpdate
        Incoming_Swift_Notification_Listener ->> Swift_Messages_Attribute_Table: insertOrUpdate
    end





 sequenceDiagram

    # This diagram is not completed yet.

    # Kuyruktan dinleniyormus gibi gorunuyor. -> SwiftCore'un manuel ekranindan is birimi mesaj sahiplenecekse neden kuyruktan gelmiyor demisler.
    # Transfer Layer bitirilecek.

    SWCore_Message_Notification_Queue ->> Incoming_Swift_Notification_Listener: SWIFT_MESSAGE_UNCLAIMED
    Incoming_Swift_Notification_Listener ->> Has_Transfer: Request

    alt hasTransfer
        Has_Transfer ->> Incoming_Swift_Notification_Listener: Response True
        alt isAccounted
            Incoming_Swift_Notification_Listener ->> iade: Request
        else
            Incoming_Swift_Notification_Listener ->> iptal: Request
        end
    else
        Has_Transfer ->> Incoming_Swift_Notification_Listener: Response False
    end

    Incoming_Swift_Notification_Listener ->> incoming_Swift_Messages_Table: Update status to SWIFT_MESSAGE_UNCLAIMED, update_date
    Incoming_Swift_Notification_Listener ->> interaction_request_table: Insert
    # Incoming_Swift_Notification_Listener ->> Publisher_Outbox_Table: Insert Outbox type SWIFT_MESSAGE_UNCLAIMED, Status PENDING
    # 5- Claim Request Outbox CLAIM_SWIFT_MESSAGE ayni zamanda release bildirimlerini de outbox'dan exchange'e iletiyor.





 sequenceDiagram

	# SwiftCore sahiplenilmemis mesaj varsa o da alert verecek. Ama burada claim etmek istedigimizden o alertten once Unanswered_Claim_Request_Alert alerti gelende uyari vermeli.
	
    Unanswered_Claim_Request_Alert ->> incoming_Swift_Messages_Table: Get All CLAIM_SWIFT_MESSAGE status records update_date > 10 min (mesaj claim taleplerini iletme suresinden birkac daha fazla yapilabilir)
    incoming_Swift_Messages_Table ->> Unanswered_Claim_Request_Alert: Response
    Unanswered_Claim_Request_Alert ->> Outlook_Mail: Unanswered_Claim_Request_Alert for this unique message id, and interaction_id






 sequenceDiagram

	# Outbox'daki isteklere mesela Claim'e CLAIM_REQUEST_REJECTED gelirse alerti.
	
    CLAIM_REQUEST_REJECTED_Alert ->> Publisher_Outbox_Table: Get All CLAIM_REQUEST_REJECTED
    Publisher_Outbox_Table ->> CLAIM_REQUEST_REJECTED_Alert: Response
    CLAIM_REQUEST_REJECTED_Alert ->> Outlook_Mail: CLAIM_REQUEST_REJECTED_Alert for this interaction_id








sequenceDiagram

    # SWIFT_CORE_TRAFFIC_ENDED = Swift Core sistemi mesaj trafigin bitirdiginde sistem bu tip ile bildirim iletecektir.

    SWCore_Message_Notification_Queue ->> Incoming_Swift_Notification_Listener: SWIFT_CORE_TRAFFIC_ENDED
    Incoming_Swift_Notification_Listener ->> swiftcore_interaction_table: insert SWIFT_CORE_TRAFFIC_ENDED
